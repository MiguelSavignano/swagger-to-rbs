
require 'httparty'

class <%= @module_name %>
  include HTTParty

  base_uri "<%= @data[:base_uri] %>"

  def initialize
    self.class.headers({ 'Content-Type' => 'application/json' })
  end
  <%- @data[:endpoints].each do |endpoint| -%>

  <%- if endpoint[:method] == 'get' -%>
  def <%= endpoint[:method_name] %>(<%= endpoint[:parameters_for_method] %>)
    self.class.<%= endpoint[:method] %>("<%= endpoint[:path] %>", options)
  end
  <%- else -%>
  def <%= endpoint[:method_name] %>(<%= endpoint[:parameters_for_method] %>)
    self.class.<%= endpoint[:method] %>("<%= endpoint[:path] %>", { body: body.to_json }.merge(options))
  end
  <%- end -%>
  <%- end -%>
end
